{
    "i18n": false,
    "type": "panel",
    "items": {
        "_header_tv": {
            "type": "header",
            "text": "Panasonic Viera TV Einstellungen",
            "size": 3,
            "sm": 12
        },
        "_help": {
            "type": "staticText",
            "text": "Stelle sicher, dass am TV unter Men\u00fc \u2192 Netzwerk \u2192 TV Remote App aktiviert ist.",
            "sm": 12,
            "style": {
                "marginBottom": 16
            }
        },
        "_statusOk": {
            "type": "staticText",
            "text": "\uD83D\uDFE2  ${data.connectionMessage}",
            "hidden": "data.connectionStatus !== 'ok'",
            "sm": 12,
            "style": {
                "fontSize": 18,
                "fontWeight": "bold",
                "color": "#4caf50",
                "padding": "12px 0"
            }
        },
        "_statusError": {
            "type": "staticText",
            "text": "\uD83D\uDD34  ${data.connectionMessage}",
            "hidden": "data.connectionStatus !== 'error'",
            "sm": 12,
            "style": {
                "fontSize": 18,
                "fontWeight": "bold",
                "color": "#f44336",
                "padding": "12px 0"
            }
        },
        "_statusUnknown": {
            "type": "staticText",
            "text": "\u26AA  Verbindung noch nicht getestet",
            "hidden": "data.connectionStatus === 'ok' || data.connectionStatus === 'error'",
            "sm": 12,
            "style": {
                "fontSize": 18,
                "fontWeight": "bold",
                "color": "#9e9e9e",
                "padding": "12px 0"
            }
        },
        "_divider0": {
            "type": "divider",
            "sm": 12
        },
        "ip": {
            "type": "text",
            "label": "IP-Adresse des TVs",
            "sm": 12,
            "md": 6,
            "placeholder": "192.168.1.100",
            "help": "Die IP-Adresse deines Panasonic Viera TVs. Findbar unter Men\u00fc \u2192 Netzwerk \u2192 Netzwerkstatus."
        },
        "pollingInterval": {
            "type": "number",
            "label": "Abfrageintervall (Sekunden)",
            "sm": 12,
            "md": 6,
            "min": 5,
            "max": 300,
            "step": 1,
            "help": "Wie oft der TV-Status (Volume, Mute, Erreichbarkeit) abgefragt wird. Standard: 15 Sekunden."
        },
        "_divider1": {
            "type": "divider",
            "sm": 12
        },
        "_testButton": {
            "type": "sendTo",
            "label": "Verbindung testen",
            "command": "testConnection",
            "variant": "contained",
            "color": "primary",
            "icon": "wifi",
            "sm": 12,
            "md": 4,
            "jsonData": "{\"ip\": \"${data.ip}\"}",
            "alsoDependsOn": ["ip"],
            "useAdapter": true,
            "showProcess": true
        },
        "_divider2": {
            "type": "divider",
            "sm": 12
        },
        "useAppleTv": {
            "type": "checkbox",
            "label": "Apple TV zum Einschalten nutzen (HDMI-CEC)",
            "sm": 12,
            "help": "Wenn aktiviert, wird der TV \u00fcber ein Apple TV per HDMI-CEC eingeschaltet."
        },
        "_header_atv": {
            "type": "header",
            "text": "Apple TV Einstellungen",
            "size": 4,
            "sm": 12,
            "hidden": "!data.useAppleTv"
        },
        "_atvHelp": {
            "type": "staticText",
            "text": "Apple TV IP-Adresse und Identifier eingeben (oder Scan versuchen), dann AirPlay und Companion pairen.",
            "sm": 12,
            "hidden": "!data.useAppleTv",
            "style": {
                "marginBottom": 12
            }
        },
        "appleTvAddress": {
            "type": "text",
            "label": "Apple TV IP-Adresse",
            "sm": 12,
            "md": 4,
            "placeholder": "192.168.1.47",
            "hidden": "!data.useAppleTv",
            "help": "IP-Adresse des Apple TV. Findbar unter Apple TV \u2192 Einstellungen \u2192 Netzwerk."
        },
        "appleTvIdentifier": {
            "type": "text",
            "label": "Apple TV Identifier (MAC)",
            "sm": 12,
            "md": 4,
            "placeholder": "AA:BB:CC:DD:EE:FF",
            "hidden": "!data.useAppleTv",
            "help": "Identifier/MAC des Apple TV. Wird beim Scan automatisch eingetragen."
        },
        "_scanButton": {
            "type": "sendTo",
            "label": "Apple TV suchen",
            "command": "scanAppleTv",
            "variant": "outlined",
            "color": "primary",
            "icon": "search",
            "sm": 12,
            "md": 4,
            "hidden": "!data.useAppleTv",
            "useAdapter": true,
            "showProcess": true
        },
        "_atvCredStatus": {
            "type": "staticText",
            "text": "AirPlay: ${data.appleTvAirplayCredentials ? '\uD83D\uDFE2 gepairt' : '\uD83D\uDD34 nicht gepairt'}  |  Companion: ${data.appleTvCompanionCredentials ? '\uD83D\uDFE2 gepairt' : '\uD83D\uDD34 nicht gepairt'}",
            "hidden": "!data.useAppleTv || (!data.appleTvIdentifier && !data.appleTvAddress)",
            "sm": 12,
            "style": {
                "fontSize": 14,
                "padding": "4px 0 12px 0"
            }
        },
        "_divider3": {
            "type": "divider",
            "sm": 12,
            "hidden": "!data.useAppleTv || (!data.appleTvIdentifier && !data.appleTvAddress)"
        },
        "pairProtocol": {
            "type": "select",
            "label": "Protokoll zum Pairen",
            "sm": 12,
            "md": 4,
            "options": [
                {"label": "AirPlay", "value": "airplay"},
                {"label": "Companion", "value": "companion"}
            ],
            "hidden": "!data.useAppleTv || (!data.appleTvIdentifier && !data.appleTvAddress)"
        },
        "_pairButton": {
            "type": "sendTo",
            "label": "Pairing starten",
            "command": "startPairing",
            "variant": "contained",
            "color": "secondary",
            "sm": 12,
            "md": 4,
            "jsonData": "{\"protocol\": \"${data.pairProtocol}\"}",
            "alsoDependsOn": ["pairProtocol"],
            "useAdapter": true,
            "showProcess": true,
            "hidden": "!data.useAppleTv || (!data.appleTvIdentifier && !data.appleTvAddress)"
        },
        "pairPin": {
            "type": "text",
            "label": "PIN (vom Apple TV Screen)",
            "sm": 12,
            "md": 4,
            "placeholder": "1234",
            "hidden": "!data.useAppleTv || (!data.appleTvIdentifier && !data.appleTvAddress)"
        },
        "_pinButton": {
            "type": "sendTo",
            "label": "PIN absenden",
            "command": "submitPin",
            "variant": "contained",
            "color": "secondary",
            "sm": 12,
            "md": 4,
            "jsonData": "{\"pin\": \"${data.pairPin}\", \"protocol\": \"${data.pairProtocol}\"}",
            "alsoDependsOn": ["pairPin", "pairProtocol"],
            "useAdapter": true,
            "showProcess": true,
            "hidden": "!data.useAppleTv || (!data.appleTvIdentifier && !data.appleTvAddress)"
        },
        "connectionStatus": {
            "type": "text",
            "hidden": true,
            "noSave": true
        },
        "connectionMessage": {
            "type": "text",
            "hidden": true,
            "noSave": true
        },
        "appleTvName": {
            "type": "text",
            "hidden": true
        },
        "appleTvAirplayCredentials": {
            "type": "text",
            "hidden": true,
            "noSave": true
        },
        "appleTvCompanionCredentials": {
            "type": "text",
            "hidden": true,
            "noSave": true
        },
        "appleTvMrpCredentials": {
            "type": "text",
            "hidden": true,
            "noSave": true
        }
    }
}
